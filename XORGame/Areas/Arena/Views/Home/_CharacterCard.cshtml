@model XORGame.Data.DataTransferEntities.CharacterBattleData

@{
    var healthPercentage = Math.Ceiling(Model.HealthPercentage);
    var turnMeterPercentage = Model.IsSelected ? 100 : Math.Ceiling(Model.TurnMeterPercentage);
}

<div id="character-@Model.ID" class="col">
    <div class="card text-center rounded-0 board-space">
        <img class="card-img" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAQAAAAgCth2AAAArElEQVR42u3QIQEAAAACIP1/2hkWmEBDqkCCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEhQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEHC2wBv1wCD+McX/gAAAABJRU5ErkJggg==" />
        <div class="card-img-overlay p-1 align-bottom">
            @if (!string.IsNullOrWhiteSpace(Model.Name))
            {
                <div class="card character-box @(Model.IsSelected ? "selected-character" : "bg-light") h-100" 
                     data-isEnemy="@Model.IsEnemy.ToString().ToLower()" data-characterid="@Model.ID">
                    <div class="card-body p-1 h-100">
                        <div class="card-text h-75 d-none d-lg-block">@Model.Name</div>
                        <div class="card-text h-75 d-lg-none d-block"></div>
                        <div class="card-text pl-lg-2 pr-lg-2 pt-lg-2 pt-sm-0">
                            @if (Model.IsAlive())
                            {
                                <div class="hp-bar progress">
                                    <div class="progress-bar @(healthPercentage < 90 ? healthPercentage < 30 ? "bg-danger" : "bg-warning" : "bg-success")"
                                         style="width: @(healthPercentage.ToString())%;"
                                         role="progressbar"
                                         aria-valuenow=@healthPercentage
                                         aria-valuemin="0"
                                         aria-valuemax="100">
                                    </div>
                                </div>
                                <div class="speed-bar progress text-center">
                                    <div id="@(Model.ID)-speed-bar" class="progress-bar bg-info"
                                         style="width: @(turnMeterPercentage.ToString())%;"
                                         role="progressbar"
                                         aria-valuenow=@turnMeterPercentage
                                         aria-valuemin="0"
                                         aria-valuemax="100">
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="text-center">
                                    <span>DEAD</span>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>        
    </div>
</div>
