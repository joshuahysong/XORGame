@model XORGame.Data.DataTransferEntities.Boardspace

<div class="col">
    <div id="space-@string.Format("{0}-{1}", Model.Coordinates.X, Model.Coordinates.Y)" 
         class="card text-center rounded-0 board-space">
        <img class="card-img" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAQAAAAgCth2AAAArElEQVR42u3QIQEAAAACIP1/2hkWmEBDqkCCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEhQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIEHC2wBv1wCD+McX/gAAAABJRU5ErkJggg==" />
        <div class="card-img-overlay p-1">
            @if (Model.Character != null)
            {
                var healthPercentage = Math.Ceiling(Model.Character.HealthPercentage);
                var turnMeterPercentage = Model.Character.IsSelected ? 100 : Math.Ceiling(Model.Character.TurnMeterPercentage);
                <div class="card character-box h-100 
                     @(Model.Character.IsSelected ? "selected-character" : string.Empty)
                     @(Model.Character.IsEnemy ? "border-danger" : "border-info")" 
                     data-isEnemy="@Model.Character.IsEnemy.ToString().ToLower()" data-characterid="@Model.Character.ID">
                    <div class="card-body p-1 h-100">
                        <div class="card-text h-75 d-none d-lg-block">@Model.Character.Name</div>
                        <div class="card-text h-75 d-lg-none d-block"></div>
                        <div class="card-text pl-lg-2 pr-lg-2 pt-lg-2 pt-sm-0">
                            @if (Model.Character.IsAlive())
                            {
                                <div class="hp-bar progress">
                                    <div class="progress-bar @(healthPercentage < 90 ? healthPercentage < 30 ? "bg-danger" : "bg-warning" : "bg-success")"
                                         style="width: @(healthPercentage.ToString())%;"
                                         role="progressbar"
                                         aria-valuenow=@healthPercentage
                                         aria-valuemin="0"
                                         aria-valuemax="100">
                                    </div>
                                </div>
                                <div class="speed-bar progress text-center">
                                    <div class="progress-bar bg-info"
                                         style="width: @(turnMeterPercentage.ToString())%;"
                                         role="progressbar"
                                         aria-valuenow=@turnMeterPercentage
                                         aria-valuemin="0"
                                         aria-valuemax="100">
                                    </div>
                                </div>
                            }
                            else
                            {
                                <span>DEAD</span>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>        
    </div>
</div>
